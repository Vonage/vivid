@use '@vonage/vvd-typography/scss/typography';
@use '@vonage/vvd-design-tokens/build/scss/semantic-variables/scheme-variables';
@use 'partials/vwc-calendar-variables' as calendar-variables;

:host {
	display: contents;
}

section {
	--shf: 4.9406564584124654e-322; // https://stackoverflow.com/a/64921523/3027703
	$gutter: 4px;
	$unit-indent: 8px;
	$indent-calc: min(var(#{calendar-variables.$indent}), #{$unit-indent * 4});
	$dividers-block-size: calc(1px /* per cell divider */* (var(#{calendar-variables.$duration}) - 1) * var(--shf) / var(--shf));
	$dividers-top-size: calc(1px /* per cell divider */* var(#{calendar-variables.$start}) * var(--shf) / var(--shf));
	$top: calc(var(#{calendar-variables.$start}) * (100% - #{calendar-variables.$total-rows - 1}px) / #{calendar-variables.$total-rows} + #{$dividers-top-size});
	$hour-block-size: calc((100% - #{calendar-variables.$total-rows - 1}px) / #{calendar-variables.$total-rows});

	#{calendar-variables.$indent}: calc(0px + var(#{calendar-variables.$overlap-count}, 0) * #{$unit-indent});
	position: absolute;
	z-index: var(#{calendar-variables.$overlap-count});
	top: $top;
	overflow: hidden;
	box-sizing: border-box;
	padding: $gutter $gutter*2;
	margin: 0 #{$unit-indent} 0 #{$indent-calc};
	background-color: var(#{calendar-variables.$color}, var(#{scheme-variables.$vvd-color-neutral-40}));
	block-size: calc(var(#{calendar-variables.$duration}) * #{$hour-block-size} + #{$dividers-block-size});
	border-radius: var(#{calendar-variables.$calendar-shape});
	color: var(#{scheme-variables.$vvd-color-on-primary});
	contain: strict;
	inline-size: calc(100% - #{$unit-indent} - #{$indent-calc});
	max-block-size: calc(100% - #{$top});
	// grid-column: var(#{calendar-variables.$day});
	// grid-row: var(#{calendar-variables.$start}) / var(#{calendar-variables.$duration});
	&:focus {
		z-index: 2000;
	}
}

h2 {
	@include typography.typography-cat-shorthand('caption-bold');
	margin: 0;
	> strong {
		font: inherit;
	}
}

p {
	@include typography.typography-cat-shorthand('caption');
	margin: 0;
}
