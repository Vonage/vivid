@use 'sass:selector';
@use '../../../utils/scss/variable-names/color-base-variable-names' as color-base;

// sizing parts only
:host {
	border-radius: 16px;

	.mdc-switch,
	.mdc-switch__native-control {
		width: 30px;
		height: 20px;
	}

	.mdc-switch__track {
		width: 100%;
		height: 100%;
		border-radius: 16px;
		border-width: 0;
	}

	.mdc-switch__thumb-underlay {
		top: 0;
		left: 0;
		width: 20px;
		height: 100%;

		.mdc-switch__thumb {
			width: 16px;
			height: 16px;
			border: none;
		}
	}

	.mdc-switch--checked {
		.mdc-switch__thumb-underlay {
			transform: translateX(10px);
		}
		
		.mdc-switch__native-control {
			transform: translateX(-10px);
		}
	}
}

// ! move to utils as this might be a common
// ! mixin for other components such as call-out
@mixin connotations-context(
  $selector: ':host([connotation-specifier])',
  $default: primary
) {
  $connotations: primary cta success error;

  @each $connotation in $connotations {
    $attr: '[connotation="#{$connotation}"i]';

    $scoped-selector: $selector; // prevents overriding argument

    $scoped-selector: selector.replace(
      #{$selector},
      '[connotation-specifier]',
      #{$attr}
    );

    @if ($connotation == $default) {
      $default-selector: selector.replace(
        #{$selector},
        '[connotation-specifier]',
        ':not([connotation])'
      );
      $scoped-selector: $default-selector, $scoped-selector;
    }

    #{$scoped-selector} {
			--mdc-theme-secondary: var(--vvd-color-#{$connotation}-background);
			--vvd-switch-checked-background-hover: var(--vvd-color-#{$connotation}-background-hover);
			--vvd-switch-checked-border-focus: var(--vvd-color-#{$connotation}-border);
		}
  }
}

@include connotations-context(
  ':host([connotation-specifier])'
);

:host([enlarged]) {
	.mdc-switch,
	.mdc-switch__native-control {
		width: 50px;
		height: 32px;
	}

	.mdc-switch__thumb-underlay {
		width: 32px;

		.mdc-switch__thumb {
			width: 24px;
			height: 24px;
		}
	}

	.mdc-switch--checked {
		.mdc-switch__thumb-underlay {
			transform: translateX(18px);
		}

		.mdc-switch__native-control {
			transform: translateX(-18px);
		}
	}
}

//	colors/shadowing
:host {
	--mdc-theme-on-surface: var(--vvd-switch-unchecked-background);

	.mdc-switch {
		.mdc-switch__thumb {
			box-shadow: none;
		}

		&.mdc-switch--checked .mdc-switch__thumb {
			background-color: #fff;
		}

		&:hover .mdc-switch__thumb {
			opacity: 0.9;
		}

		.mdc-switch__track,
		&.mdc-switch--checked .mdc-switch__track {
			opacity: initial;
		}

		&:hover .mdc-switch__track {
			background-color: var(--vvd-switch-checked-background-hover);
		}
		
		&:not(.mdc-switch--checked):hover .mdc-switch__track {
			background-color: var(--vvd-switch-unchecked-background-hover);
		}

		&.mdc-switch--disabled {
			opacity: initial;

			.mdc-switch__track {
				opacity: initial;
				background-color: color-base.$grey-500;
			}
		}
	}
}

// TODO: create dropshadow colour vars
:host(:not([disabled]):focus-within) {
	box-shadow: 1px -1px 4px rgba(0, 0, 0, 0.25), -1px 1px 3px 1px rgba(0, 0, 0, 0.25);

	.mdc-switch__track {
		box-shadow: inset 0 0 1px 1px var(--vvd-switch-checked-border-focus);
	}

	.mdc-switch:not(.mdc-switch--checked) .mdc-switch__track {
		background-color: var(--vvd-switch-unchecked-background-focus);
		box-shadow: inset 0 0 1px 1px var(--vvd-switch-unchecked-border-focus);
	}
}
