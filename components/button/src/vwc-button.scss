@use 'sass:selector';
@use '@material/button';
@forward './vwc-button-coupling';
@use '@vonage/vvd-style-coupling/vvd-style-coupling-variables' as sc-variables;

:host {
	--mdc-button-disabled-ink-color: var(#{sc-variables.$formfield-disabled-ink});
	--mdc-button-disabled-fill-color: var(#{sc-variables.$formfield-border-idle});
}


// ! move to utils as this might be a common
// ! mixin for other components such as call-out
@mixin connotations-context(
  $selector: ':host([connotation-specifier])',
  $default: primary
) {
  $connotations: primary cta success error;

  @each $connotation in $connotations {
    $attr: '[connotation="#{$connotation}"i]';

    $scoped-selector: $selector; // prevents overriding argument

    $scoped-selector: selector.replace(
      #{$selector},
      '[connotation-specifier]',
      #{$attr}
    );

    @if ($connotation == $default) {
      $default-selector: selector.replace(
        #{$selector},
        '[connotation-specifier]',
        ':not([connotation])'
      );
      $scoped-selector: $default-selector, $scoped-selector;
    }

    #{$scoped-selector} {
      --mdc-theme-primary: var(--vvd-color-#{$connotation}-background);
      --mdc-theme-on-primary: var(--vvd-color-#{$connotation}-foreground);
    }
  }
}

@include connotations-context(':host([unelevated][connotation-specifier])');


/////////////////////////////////////////////////////////////////////////////
.mdc-button {
  @include button.height(40px);
	// text-transform: initial;
	font-stretch: var(--vvd-typography-font-stretch);
	letter-spacing: normal;
  border-radius: 6px;
}

:host([disabled]) .mdc-button.mdc-button--outlined {
  border-color: var(--vvd-color-disabled-fill-color);
}

.pill {
  border-radius: 40px;
}