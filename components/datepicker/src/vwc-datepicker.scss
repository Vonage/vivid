@use '@vonage/vvd-typography/scss/typography' as typography;
@use '@vonage/vvd-design-tokens/build/scss/semantic-variables/scheme-variables';

//////////////////////
// flatpickr overrides
//////////////////////
.flatpickr-calendar.vvd-datepicker {
  background: var(#{scheme-variables.$vvd-color-base});
  border: 1px solid var(#{scheme-variables.$vvd-color-contrast-faint});
  border-radius: 6px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, .1);
  overflow: hidden;
  width: 320px;
  @include typography.typography-cat-shorthand('body-2');

  &:not(.noCalendar) {
    padding: 24px 0 16px;
  }

  .flatpickr {
    &-months {
      display: none;
    }

    &-rContainer,
    &-weekdays,
    &-days,
    &-days .dayContainer,
    &-dayContainer {
      border: none;
      min-width: 286px;
      width: 286px;
    }
  
    &-weekdays {
      background: none;
      border-bottom: 1px solid var(#{scheme-variables.$vvd-color-contrast-faint});
      height: 20px;
      margin-bottom: 8px;
      text-transform: uppercase;
    }
  
    &-weekday {
      background: none;
      color: var(#{scheme-variables.$vvd-color-on-base});
      font-size: 12px;
      font-weight: 600;
    }
  
    &-day {
      border: 0;
      color: var(#{scheme-variables.$vvd-color-on-base});
      height: 30px;
      line-height: 30px;
      margin-top: 4px;
      transition: color 0.2s;
  
      &:before {
        background-color: transparent;
        border-radius: 50%;
        content: '';
        height: 30px;
        left: 50%;
        margin-left: -15px;
        position: absolute;
        transition: background-color 0.2s;
        width: 30px;
        z-index: -1;
      }
  
      &:nth-child(7n) {
        &.flatpickr-day.inRange {
          border-bottom-right-radius: 15px;
          border-top-right-radius: 15px;
          box-shadow: -5px 0 0 var(#{scheme-variables.$vvd-color-contrast-faint});
        }
      }
  
      &:nth-child(7n+1) {
        &.flatpickr-day.inRange {
          border-bottom-left-radius: 15px;
          border-top-left-radius: 15px;
          box-shadow: 5px 0 0 var(#{scheme-variables.$vvd-color-contrast-faint});
        }
  
        &.flatpickr-day.inRange,
        &.flatpickr-day.endRange {
          &:after {
            display: none;
          }
        }
      }
  
      &.today:before {
        border: 1px solid var(#{scheme-variables.$vvd-color-primary});
        box-sizing: border-box;
      }
  
      &.prevMonthDay,
      &.flatpickr-disabled {
        color: var(#{scheme-variables.$vvd-color-contrast-dim});
        cursor: default;
        pointer-events: none;
      }
  
      &.nextMonthDay {
        height: 0;
        visibility: hidden;
      }
  
      &:hover,
      &.startRange,
      &.endRange,
      &.selected {
        background: none;
        border: 0;
        color: var(#{scheme-variables.$vvd-color-on-primary});
        font-weight: 600;
        position: relative;
  
        &:before {
          background-color: var(#{scheme-variables.$vvd-color-primary});
        }
      }
  
      &.selected {
        &:before {
          animation-duration: 0.1s;
          animation-name: selected;
          background-color: var(#{scheme-variables.$vvd-color-announcement});
        }
      }
  
      @keyframes selected {
        0%   {background-color: var(#{scheme-variables.$vvd-color-primary});}
        100% {background-color: var(#{scheme-variables.$vvd-color-announcement});}
      }
  
      &.startRange + .inRange,
      &.endRange {
        &:after {
          background-color: var(#{scheme-variables.$vvd-color-contrast-faint});
          content: '';
          height: 30px;
          position: absolute;
          right: 50%;
          width: 100%;
          z-index: -2;
        }
      }
  
      &.startRange {
        &.endRange {
          &:after {
            display: none;
          }
        }
      }
  
      &.inRange,
      &.inRange.today {
        background-color: var(#{scheme-variables.$vvd-color-contrast-faint});
        border-color: var(#{scheme-variables.$vvd-color-contrast-faint});
        box-shadow: -5px 0 0 var(#{scheme-variables.$vvd-color-contrast-faint}), 5px 0 0 var(#{scheme-variables.$vvd-color-contrast-faint});
        font-weight: 600;
  
        &:hover {
          color: var(#{scheme-variables.$vvd-color-contrast-tinted});
        }
      }
    }
  
    &-innerContainer {
      border: none;
      padding: 16px 16px 0;
    }
  }
  
  // removes box-shadow on adjacent days in range mode
  .flatpickr-day.selected.startRange + .endRange:not(:nth-child(7n+1)),
  .flatpickr-day.startRange + .selected.endRange:not(:nth-child(7n+1)) {
    box-shadow: none;
  }
}


// custom header
.vvd-datepicker-header {
  align-items: center;
  display: flex;
  height: 36px;
  padding: 0 16px;
  @include typography.typography-cat-shorthand('subtitle-2');

  .month {
    margin-right: 8px;
  }

  vwc-icon-button {
    display: flex;

    &:first-of-type {
      margin-left: auto;
      margin-right: 8px;
    }
  }
}

// custom range container
.vvd-datepicker-range {
  align-items: center;
  background-color: var(#{scheme-variables.$vvd-color-announcement});
  box-sizing: border-box;
  color: var(#{scheme-variables.$vvd-color-on-announcement});
  display: flex;
  height: 54px;
  justify-content: space-between;
  margin-top: 16px;
  padding: 5px 28px 5px;
  position: relative;

  &-start,
  &-end {
    @include typography.typography-cat-shorthand('body-1-bold');

    &:before {
      display: flex;
      @include typography.typography-cat-shorthand('body-1');
    }

    &.selected {
      align-self: flex-end;

      &:before {
        @include typography.typography-cat-shorthand('caption');
      }
    }
  }

  &-start:before {
    content: 'Start';
  }
  
  &-end {
    flex-basis: 100px;
    text-align: left;

    &:before {
      content: 'End';
    }
  }

  &:after {
    background-color: var(#{scheme-variables.$vvd-color-on-announcement});
    content: '';
    height: 40px;
    left: 50%;
    margin-left: -1px;
    opacity: 0.5;
    position: absolute;
    top: 8px;
    transform: rotate(35deg);
    width: 1px;
  }
}

// custom footer
.vvd-datepicker-footer {
  padding: 0 16px;
  text-align: right;

  button{
    appearance: none;
    background: 0 0;
    border: 0;
    color: var(#{scheme-variables.$vvd-color-on-base});
    cursor: pointer;
    font-size: 12px;
    outline: 0;
    padding: 8px 12px;

    &:hover {
      text-decoration: underline;
    }
  }
}

// style dump from volta

// .Vlt-datepicker {
  // &.rangeMode {
  //     .Vlt-datepicker__range {
  //         display: block;
  //     }

  //     .flatpickr-day {
  //         &.selected {
  //             &:before {
  //                 animation-name: none;
  //                 background-color: $black;
  //             }
  //         }
  //     }

  //     .Vlt-datepicker__months {
  //         .Vlt-datepicker__month {
  //             &.selected {
  //                 color: $black;

  //                 &:after {
  //                     background-color: $grey-lighter;
  //                 }
  //             }
  //         }
  //     }
  // }

  // .Vlt-datepicker {
  //     &__header-month {
  //         cursor: pointer;

  //         &:hover {
  //             color: $grey-darker;
  //         }
  //     }

  //     &__nav {
  //         position: absolute;
  //         right: 25px;
  //             top: 25px;

  //         &-next,
  //         &-prev {
  //             $fill-color: encode-hex-code($black);
  //             background-image: url('data:image/svg+xml,%3Csvg%20viewBox%3D%220%200%2020%2020%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cpath%20style%3D%22fill%3A#{$fill-color}%3B%22%20d%3D%22M3.38326%207.96544C3.58628%207.68629%203.97717%207.62457%204.25632%207.82759L9.99983%2012.0047L15.7433%207.82759C16.0225%207.62457%2016.4134%207.68629%2016.6164%207.96544C16.8194%208.2446%2016.7577%208.63549%2016.4785%208.83851L10.3674%2013.283C10.1483%2013.4423%209.85138%2013.4423%209.63222%2013.283L3.52111%208.83851C3.24195%208.63549%203.18023%208.2446%203.38326%207.96544Z%22%2F%3E%0A%3C%2Fsvg%3E');
  //             background-position: center center;
  //             background-repeat: no-repeat;
  //             background-size: 20px;
  //             border: 1px solid $grey;
  //             border-radius: 50%;
  //             cursor: pointer;
  //             display: inline-block;
  //             height: 30px;
  //             transform: rotate(270deg);
  //             transition: background-color 0.2s;
  //             width: 30px;

  //             &:hover {
  //                 background-color: rgba($black, 0.1);
  //             }

  //             &:active {
  //                 background-color: rgba($black, 0.2);
  //             }
  //         }

  //         &-prev {
  //             margin-right: 10px;
  //             transform: rotate(90deg);
  //         }
  //     }

  //     &__months {
  //         display: none;
  //         margin: 15px 0;
  //         max-width: 279px;
  //         width: 279px;

  //         .Vlt-datepicker__month {
  //             color: $black;
  //             display: inline-block;
  //             font-size: 1.5rem;
  //             line-height: 2.1rem;
  //             margin-bottom: 24px;
  //             padding: 12px 0;
  //             position: relative;
  //             text-transform: uppercase;
  //             transition: color 0.2s;
  //             width: 25%;

  //             &:after {
  //                 background-color: transparent;
  //                 border-radius: 50%;
  //                 bottom: 0;
  //                 content: '';
  //                 height: 50px;
  //                 left: 50%;
  //                 position: absolute;
  //                 top: -3px;
  //                 transform: translateX(-50%);
  //                 transition: background-color 0.2s;
  //                 width: 50px;
  //                 z-index: -1;
  //             }

  //             &:hover,
  //             &.selected {
  //                 color: $white;
  //                 cursor: pointer;
  //                 font-weight: 600;

  //                 &:after {
  //                     background-color: $black;
  //                 }
  //             }

  //             &.selected {
  //                 &:after {
  //                     background-color: $indigo;
  //                 }
  //             }

  //             &.Vlt-datepicker__month-disabled {
  //                 color: $grey;
  //                 cursor: default;
  //                 pointer-events: none;
  //             }
  //         }
  //     }
  // }
// }
