@use '@material/select';
@use '@vonage/vvd-fonts/typography' as typography;
@use '@vonage/vvd-style-coupling/src/vvd-style-coupling-variables' as sc-variables;

:host {
	--mdc-select-filled-border-radius: 6px;
  --mdc-theme-primary: var(--vvd-color-alternate-primary-background);
  --mdc-select-ink-color: var(--mdc-theme-primary);
  --mdc-select-label-ink-color: var(#{sc-variables.$formfield-label-idle-ink});
	--mdc-select-disabled-ink-color: var(#{sc-variables.$formfield-disabled-inc});
	--mdc-select-disabled-fill-color: var(#{sc-variables.$formfield-disabled-fill});

  --mdc-select-dropdown-icon-color: var(--mdc-theme-primary);
  --mdc-select-focused-dropdown-icon-color: var(--mdc-theme-primary);
  --mdc-select-disabled-dropdown-icon-color: var(--mdc-select-disabled-ink-color);
  --mdc-select-error-dropdown-icon-color: var(--mdc-select-error-color);
  --mdc-select-outlined-idle-border-color: var(#{sc-variables.$formfield-border-idle});
  --mdc-select-outlined-hover-border-color: var(#{sc-variables.$formfield-border-hover});
  --mdc-select-outlined-disabled-border-color: var(#{sc-variables.$formfield-border-disabled});

	@include typography.font-combo('Body2');

	--vvd-outline-color: var(--mdc-select-outlined-idle-border-color);
}

:host(:not([disabled])) .mdc-select.mdc-select--focused:not(.mdc-select--invalid) {
  .mdc-floating-label {
    color: var(--mdc-select-label-ink-color);
  }
}

:host([disabled]) .mdc-select {
	--vvd-outline-color: var(--mdc-select-outlined-disabled-border-color);
	background-color: var(--mdc-select-disabled-fill-color);

	.mdc-select__selected-text {
		color: var(--mdc-select-disabled-ink-color);
	}

	.mdc-notched-outline {
		.mdc-floating-label--float-above {
			--mdc-theme-primary: var(--mdc-select-label-ink-color);
		}
	}
}

:host(:not([disabled])) .mdc-select.mdc-select--focused mwc-notched-outline {
  --mdc-notched-outline-stroke-width: 1px;
}

.mdc-select {
	border-radius: 6px;

  &--outlined {
    .mdc-select__anchor {
      height: 48px;
      padding-left: 14px;

      .mdc-select__selected-text {
        font-size: var(--mdc-typography-subtitle2-font-size, 0.875rem);
        padding: 22px 0 6px;
      }

      .mdc-floating-label {
        left: 2px;
        padding-right: 8px;
        transition: transform 0.15s, font-size 0.15s;
      }

      .mdc-floating-label--float-above {
        color: var(--mdc-select-label-ink-color);
        transform: translateY(-100%);
      }

      + .mdc-select-helper-text {
        font-size: var(--mdc-typography-caption-font-size, 0.75rem);
        margin: 3px 0 0;
      }
    }
  }

  :host(:hover) &,
  &:hover,
  &--focused {
		--vvd-outline-color: var(--mdc-select-outlined-hover-border-color);
  }

  &--invalid {
    &.mdc-select--outlined {
      background-color: #fdecec;
    }

    &:before {
      background-color: var(--mdc-theme-error);
    }
  }
}