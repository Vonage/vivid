@use '../../functions';
@use 'functions' as connotation-functions;
@use 'config';
@use 'variables';

@mixin parse-connotation-base($connotation) {
	#{config.$connotation-variable}: var(#{variables.$vvd-color}-#{$connotation});
	#{config.$on-connotation-variable}: var(#{variables.$vvd-color-on}-#{$connotation});
}

@mixin parse-connotation-shade($name, $value) {
	#{config.$connotation-variable}-#{$name}: var(#{variables.$vvd-color}-#{$value});
}

@mixin connotation {
	@each $connotation, $mapping in functions.pick-map(config.$connotations-set, variables.$connotations-mapping) {
		$compound: '[connotation="#{$connotation}" i]';

		$local-selector: functions.get-local-selector(config.$selector, variables.$compound-placeholder, $compound);

		@if config.$default == $connotation {
			$default-selector: connotation-functions.connotations-default-selector(config.$default);
			$local-selector: $local-selector,	$default-selector;
		}

		#{$local-selector} {
			@if config.$base {
				@include parse-connotation-base($connotation);
			}

			@each $name, $value in functions.pick-map(config.$shades, $mapping) {
				@include parse-connotation-shade($name, $value);
			}
		}
	}
}
