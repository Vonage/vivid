@use '@vonage/vvd-design-tokens/build/scss/semantic-variables/scheme-variables' as scheme-variables;
@use '../connotation' as connotation;
@use '../../functions' as functions;
@use 'variables' as variables;
@use 'config' as config;
@use 'sass:selector';
@use 'sass:list';


////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
$all-layouts: (
	filled: 'filled',
	outlined: 'outlined',
	soft: 'soft',
	text: 'text',
	ghost: 'ghost',
);

%filled {
	#{variables.$vvd-layout-color-fill}: var(#{connotation.$vvd-color-connotation});
	#{variables.$vvd-layout-color-text}: var(#{connotation.$vvd-color-on-connotation});
}

%outlined {
	#{variables.$vvd-layout-color-fill}: transparent;
	#{variables.$vvd-layout-color-outline}: 1px solid var(#{connotation.$vvd-color-connotation});
	#{variables.$vvd-layout-color-text}: var(#{connotation.$vvd-color-connotation});
}

%soft {
	#{variables.$vvd-layout-color-fill}: var(#{connotation.$vvd-color-connotation}-soft);
	#{variables.$vvd-layout-color-text}: var(#{scheme-variables.$vvd-color-on-canvas});
}

%text,
%ghost {
	#{variables.$vvd-layout-color-fill}: transparent;
	#{variables.$vvd-layout-color-text}: var(#{connotation.$vvd-color-connotation});
}

@function get-pseudo($type) {
	@return '.#{config.$scope}--layout-#{$type}';
}

@mixin layout {
	$layout-set: functions.pick-list(config.$layout-set, config.$predefined-layout-set);

	@each $type in $layout-set {
		$pseudo: get-pseudo($type);

		$selector: selector.unify(&, $pseudo);

		@if $type == config.$default and list.length($layout-set) > 1 {
			$rule-out-pseudo: &;
			@each $rule-out-type in $layout-set {
				@if $rule-out-type != config.$default {
					$rule-out-pseudo: '#{$rule-out-pseudo}:not(#{get-pseudo($rule-out-type)})';
				}
			}
			$selector: selector.parse(#{$selector, $rule-out-pseudo});
		}

		@at-root #{$selector} {
			@extend %#{$type};
		}
	}
}
