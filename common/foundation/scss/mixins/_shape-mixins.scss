@use '../variable-names/shape-variable-names' as shape-var-names;

@function get-default-selector($list, $default) {
	$selectors: '';
	@each $key, $_ in $list {
		@if $key != $default {
			$selectors: $selectors + ':not(#{template($key)})';
		}
	}
	@return ':host(#{$selectors})';
}

@function template($key) {
	@return '[shape="#{$key}"i]';
}

@mixin shape(
	$shapes: (
		rounded: var(#{shape-var-names.$shape-border-radius-md-css-variable-name}),
		pill: var(#{shape-var-names.$shape-border-radius-lg-css-variable-name}),
		circled: 50%,
	),
	$default: rounded
) {
	@each $key, $shape in $shapes {
		$selector: ();
		@if ($key == $default) {
			// if is default also add case for not assigning shape properly

			$selector: join(
				$selector,
				get-default-selector($shapes, $default),
				$separator: comma
			);
		}

		// shape item selector
		$selector: join($selector, ':host(#{template($key)})', $separator: comma);

		#{$selector} {
			--border-radius: #{$shape};
		}
	}
}
